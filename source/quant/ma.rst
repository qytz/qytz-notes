移动平均线
=============
* 算术平均(MA)
* 加权平均(WMA)

ma,dma,ema,sma四函数用法辩析
--------------------------------------------
先看MA和EMA,首先，它们都是求平均值，这应该没疑问吧；

MA是简单算术平均，MA(C,2)=(C1+C2)/2;  MA(C,3)=(C1+C2+C3)/3;不分轻重，平均算；

EMA是指数平滑平均，它真正的指标表达是::

    当日指数平均值 = 平滑系数 *（当日指数值-昨日指数平均值）+ 昨日指数平均值；
    平滑系数=2/（周期单位+1）；

由以上指标推导开，得到::

    EMA(C,N)=2*C/(N+1)+(N-1)/(N+1)*昨天的指数收盘平均值；
    仔细看：X=EMA(C,2)=2/3*C+1/3*REF(C,1); EMA(C,3)=2/4*C+2/4*X;

所以，它在计算平均值时，考虑了前一日的平均值，平滑系数是定的，它是利用今日的值与前一日的平均值的差，再考虑平滑系数，计算出来的平均值，所以也有叫异同平均的。

因此，这两个平均算法是不同的，主要是对数组中的数据的权重侧重不同。

理解了MA，EMA的含义后，就可以理解其用途了，简单的说，当要比较数值与均价的关系时，用MA就可以了，而要比较均价的趋势快慢时，用EMA更稳定；有时，在均价值不重要时，也用EMA来平滑和美观曲线。

理解了MA和EMA的含义和用途后，后面几个函数就好理解了；

因为EMA的平滑系数是定的，=2/（周期+1）；如果要改变平滑系数咋办？这就用到了SMA；

SMA(C,N,M)与EMA的区别就是增加了权重参数M，也就是用M代替EMA平滑系数中的2,这样我们可以根据需要调整当日数值在均价中的权重=M/N。(要求N>M）；

大家注意，权重系数在EMA与SMA中都是用数值与周期计算出来的小数，假设有一个小数可以直接代表权重，如何办？这就有了DMA；

DMA(C,A) 中A为权重值，指标如下：X=DMA(C,A)=A*X+(1-A)*X(A小于1），可以发现，DMA与SMA原理是一至的，只是用一个小数直接代替了M/N;

而在实用中，这个小数最有价值的就是换手率=V/CAPITAL;DMA(C,V/CAPITAL)的直接含义是用换手率作为权重系数，利用当日收盘价在均价中的比重计算均价；

直观理解就是换手率越大，当日收盘价在均价中的作用越大！

这样理解应该知道各函数的作用和用途了！

双均线金叉和死叉
----------------
由时间短的均线（如上图蓝色的线）在下方向上穿越时间长一点的均线（如上图黄色的线），为“金叉”，反之为“死叉”。

MACD称为指数平滑移动平均线，是从双指数移动平均线发展而来的，由快的指数移动平均线（EMA12）减去慢的指数移动平均线（EMA26）得到快线DIF，再用2×（快线DIF-DIF的9日加权移动均线DEA）得到MACD柱。MACD的意义和双移动平均线基本相同，即由快、慢均线的离散、聚合表征当前的多空状态和股价可能的发展变化趋势，但阅读起来更方便。当MACD从负数转向正数，是买的信号。当MACD从正数转向负数，是卖的信号。当MACD以大角度变化，表示快的移动平均线和慢的移动平均线的差距非常迅速的拉开，代表了一个市场大趋势的转变。

MACD在应用上应先行计算出快速（一般选12日）移动平均值与慢速（一般选26日）移动平均值。以这两个数值作为测量两者（快速与慢速线）间的“差离值”依据。所谓“差离值”（DIF），即12日EMA数值减去26日EMA数值。因此，在持续的涨势中，12日EMA在26日EMA之上。其间的正差离值（+DIF）会愈来愈大。反之在跌势中，差离值可能变负（-DIF），也愈来愈大。 至于行情开始回转，正或负差离值要缩小到一定的程度，才真正是行情反转的信号。MACD的反转信号界定为“差离值”的9日移动平均值（9日EMA）。 在MACD的指数平滑移动平均线计算公式中，都分别加T+1交易日的份量权值，以现在流行的参数12和26为例，其公式如下

* 12日EMA的计算::

    EMA（12） = 前一日EMA（12） X 11/13 + 今日收盘价 X 2/13
    26日EMA的计算：
    EMA（26） = 前一日EMA（26） X 25/27 + 今日收盘价 X 2/27

* 差离值（DIF）的计算::

    DIF = EMA（12） - EMA（26） 。
    根据差离值计算其9日的EMA，即离差平均值，是所求的DEA值。为了不与指标原名相混淆，此值又名DEA或DEM。今日DEA = （前一日DEA X 8/10 + 今日DIF X 2/10）

* 用（DIF-DEA）*2即为MACD柱状图。

故MACD指标是由两线一柱组合起来形成，快速线为DIF，慢速线为DEA，柱状图为MACD。在各类投资中，有以下方法供投资者参考：
    #. 当DIF和MACD均大于0(即在图形上表示为它们处于零线以上)并向上移动时，一般表示为行情处于多头行情中，可以买入开仓或多头持仓；
    #. 当DIF和MACD均小于0(即在图形上表示为它们处于零线以下)并向下移动时，一般表示为行情处于空头行情中，可以卖出开仓或观望。
    #. 当DIF和MACD均大于0(即在图形上表示为它们处于零线以上)但都向下移动时，一般表示为行情处于下跌阶段，可以卖出开仓和观望；
    #. 当DIF和MACD均小于0时(即在图形上表示为它们处于零线以下)但向上移动时，一般表示为行情即将上涨，股票将上涨，可以买入开仓或多头持仓。
