

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>菜单 &mdash; qytz-notes v0.1</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../_static/translations.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/fix_rtd_width.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="author" title="关于这些文档" href="../../about.html" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="对话框（Dialog）" href="dialogs.html" />
    <link rel="prev" title="Multiline Text Editor" href="textview.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> qytz-notes
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Python笔记</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code/index.html">开源代码阅读笔记</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ipynb/index.html">IPython NoteBooks</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">技术笔记</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">The Python GTK+ 3 Tutorial</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="install.html">安装</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html">从零开始</a></li>
<li class="toctree-l3"><a class="reference internal" href="basics.html">基础知识</a></li>
<li class="toctree-l3"><a class="reference internal" href="unicode.html">处理字符串相关问题</a></li>
<li class="toctree-l3"><a class="reference internal" href="layout.html">布局管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="label.html">标签Label</a></li>
<li class="toctree-l3"><a class="reference internal" href="entry.html">Entry输入框</a></li>
<li class="toctree-l3"><a class="reference internal" href="button_widgets.html">按钮控件</a></li>
<li class="toctree-l3"><a class="reference internal" href="progressbar.html">进度条</a></li>
<li class="toctree-l3"><a class="reference internal" href="spinner.html">Spinner</a></li>
<li class="toctree-l3"><a class="reference internal" href="treeview.html">树与列表控件</a></li>
<li class="toctree-l3"><a class="reference internal" href="cellrenderers.html">单元格渲染器（CellRenderers）</a></li>
<li class="toctree-l3"><a class="reference internal" href="combobox.html">组合框（ComboBox）</a></li>
<li class="toctree-l3"><a class="reference internal" href="iconview.html">IconView</a></li>
<li class="toctree-l3"><a class="reference internal" href="textview.html">Multiline Text Editor</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">菜单</a></li>
<li class="toctree-l3"><a class="reference internal" href="dialogs.html">对话框（Dialog）</a></li>
<li class="toctree-l3"><a class="reference internal" href="clipboard.html">剪贴板</a></li>
<li class="toctree-l3"><a class="reference internal" href="drag_and_drop.html">拖拽支持</a></li>
<li class="toctree-l3"><a class="reference internal" href="builder.html">Glade and Gtk.Builder</a></li>
<li class="toctree-l3"><a class="reference internal" href="objects.html">对象系统</a></li>
<li class="toctree-l3"><a class="reference internal" href="stock.html">Stock Items</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gstreamer/index.html">GStreamer 开发经验</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pycairo/index.html">Pycairo Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbus/index.html">D-Bus 使用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shell-tutorial.html">shell 脚本常用操作入门</a></li>
<li class="toctree-l2"><a class="reference internal" href="../js-bit-operate.html">JavaScript 的移位运算与 IP 地址处理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auto-make-conf.html">automake 和 autoconf 使用简明教程</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python-bytes-decode.html">Python 3 Bytes.decode 遇到的问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../chmod-t.html">Linux粘滞位说明</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mysql-green-start.html">mysql绿色启动方法</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ldap.html">LDAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security.html">系统安全的思考</a></li>
<li class="toctree-l2"><a class="reference internal" href="../VPN_Advance_Options.html">VPN 高级选项那些事</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx-i11n.html">sphinx 生成本地化的文档</a></li>
<li class="toctree-l2"><a class="reference internal" href="../git-server.html">简易 git 服务器</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../quant/index.html">量化投资</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../throughts/index.html">瞎想</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">关于我</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html#id2">联系</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">qytz-notes</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">技术笔记</a> &raquo;</li>
        
          <li><a href="index.html">The Python GTK+ 3 Tutorial</a> &raquo;</li>
        
      <li>菜单</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/tech/PyGObject-Tutorial/menus.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="id1">
<h1>菜单<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<p>GTK+有两种不同的菜单， <code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.MenuBar</span></code> 和 <code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.Toolbar</span></code> 。
<code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.MenuBar</span></code> 是标准的菜单条，包含一个或多个 <code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.MenuItem</span></code>
或其子类的实例。 <code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.Toolbar</span></code> 控件用于可以快速地访问应用程序经常使用
的功能，其包含一个多个 <code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.ToolItem</span></code> 或其子类的实例。</p>
<div class="section" id="actions">
<h2>Actions<a class="headerlink" href="#actions" title="永久链接至标题">¶</a></h2>
<p>尽管有相应的API来创建菜单和工具条，你应该使用 <a class="reference internal" href="#Gtk.UIManager" title="Gtk.UIManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.UIManager</span></code></a> 并创建
<a class="reference internal" href="#Gtk.Action" title="Gtk.Action"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.Action</span></code></a> 的实例。action被组织为组， <a class="reference internal" href="#Gtk.ActionGroup" title="Gtk.ActionGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.ActionGroup</span></code></a> 实质上就是
从名字到 <a class="reference internal" href="#Gtk.Action" title="Gtk.Action"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.Action</span></code></a> 对象的映射。所有要用在某个特定上下文的action都应该
放在一个组中。多个action group可以用于特殊的用户界面，通常非一般的程序会使用多个组。
例如，在一个可以编辑多个文档的应用程序中，一组处理全局的action（如退出、关于、新建），
另一组每文档相关的则处理该文档的action（如保存、剪切/复制/粘贴）。没一个窗口的action
都应该由这两个action group组合而成。</p>
<p>不同的类代表了action不同的种类:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#Gtk.Action" title="Gtk.Action"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.Action</span></code></a>: 一个可以通过菜单或工具条项目触发的action。</p></li>
<li><p><a class="reference internal" href="#Gtk.ToggleAction" title="Gtk.ToggleAction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.ToggleAction</span></code></a>: 一个可以通过在两种状态间切换触发的action。</p></li>
<li><p><a class="reference internal" href="#Gtk.RadioAction" title="Gtk.RadioAction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.RadioAction</span></code></a>: 在一组中只有一个可以激活的action。</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.RecentAction</span></code>: 代表一个最近使用文件的列表的action。</p></li>
</ul>
<p>action代表用户可以执行的操作及其如何呈现的一些信息。这些信息包括name（不是用来显示），
label（用于显示），加速键，label是否引用 <a class="reference internal" href="stock.html#stock-items"><span class="std std-ref">stock item</span></a> ，提到信息及
action被激活时的回调函数。</p>
<p>要创建action，你可以直接调用构造函数，或者通过调用 <a class="reference internal" href="#Gtk.ActionGroup.add_action" title="Gtk.ActionGroup.add_action"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.ActionGroup.add_action()</span></code></a> 或
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.ActionGrou.add_action_with_accel()</span></code> 或以下便捷函数之一将action加入到action group中：</p>
<ul class="simple">
<li><p><a class="reference internal" href="#Gtk.ActionGroup.add_actions" title="Gtk.ActionGroup.add_actions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.ActionGroup.add_actions()</span></code></a>,</p></li>
<li><p><a class="reference internal" href="#Gtk.ActionGroup.add_toggle_actions" title="Gtk.ActionGroup.add_toggle_actions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.ActionGroup.add_toggle_actions()</span></code></a></p></li>
<li><p><a class="reference internal" href="#Gtk.ActionGroup.add_radio_actions" title="Gtk.ActionGroup.add_radio_actions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.ActionGroup.add_radio_actions()</span></code></a> 。</p></li>
</ul>
<p>注意你必须指定菜单项和子菜单的action。</p>
<div class="section" id="action">
<h3>Action 对象<a class="headerlink" href="#action" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="Gtk.Action">
<em class="property">class </em><code class="descclassname">Gtk.</code><code class="descname">Action</code><span class="sig-paren">(</span><em>name</em>, <em>label</em>, <em>tooltip</em>, <em>stock_id</em><span class="sig-paren">)</span><a class="headerlink" href="#Gtk.Action" title="永久链接至目标">¶</a></dt>
<dd><p><em>name</em> 必须唯一。</p>
<p>如果 <em>label</em> 不为 <code class="docutils literal notranslate"><span class="pre">None</span></code> ，将会在菜单项和按钮中显示。</p>
<p>如果 <em>tooltip</em> 不为 <code class="docutils literal notranslate"><span class="pre">None</span></code> ，将会用于action的提示信息。</p>
<p>如果 <em>stock_id</em> 不为 <code class="docutils literal notranslate"><span class="pre">None</span></code> ，将会用于查找 <a class="reference internal" href="stock.html#stock-items"><span class="std std-ref">stock item</span></a>
代表action在控件中显示。</p>
</dd></dl>

<dl class="class">
<dt id="Gtk.ToggleAction">
<em class="property">class </em><code class="descclassname">Gtk.</code><code class="descname">ToggleAction</code><span class="sig-paren">(</span><em>name</em>, <em>label</em>, <em>tooltip</em>, <em>stock_id</em><span class="sig-paren">)</span><a class="headerlink" href="#Gtk.ToggleAction" title="永久链接至目标">¶</a></dt>
<dd><p>参数与 <a class="reference internal" href="#Gtk.Action" title="Gtk.Action"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.Action</span></code></a> 的构造函数相同。</p>
</dd></dl>

<dl class="class">
<dt id="Gtk.RadioAction">
<em class="property">class </em><code class="descclassname">Gtk.</code><code class="descname">RadioAction</code><span class="sig-paren">(</span><em>name</em>, <em>label</em>, <em>tooltip</em>, <em>stock_id</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#Gtk.RadioAction" title="永久链接至目标">¶</a></dt>
<dd><p>前四个参数与 <a class="reference internal" href="#Gtk.Action" title="Gtk.Action"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.Action</span></code></a> 的构造函数相同。</p>
<p><em>value</em> 代表当action被选中时 <a class="reference internal" href="#Gtk.RadioAction.get_current_value" title="Gtk.RadioAction.get_current_value"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_current_value()</span></code></a> 返回的值。</p>
<dl class="method">
<dt id="Gtk.RadioAction.get_current_value">
<code class="descname">get_current_value</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Gtk.RadioAction.get_current_value" title="永久链接至目标">¶</a></dt>
<dd><p>获取action所属组中当前激活的项目的 “value” 属性的值。</p>
</dd></dl>

<dl class="method">
<dt id="Gtk.RadioAction.join_group">
<code class="descname">join_group</code><span class="sig-paren">(</span><em>group_source</em><span class="sig-paren">)</span><a class="headerlink" href="#Gtk.RadioAction.join_group" title="永久链接至目标">¶</a></dt>
<dd><p>radio action对象加入 <em>group_source</em> radio action对象所属的组。</p>
<p><em>group_source</em> 必须我们要加入的组的一个 radio action 对象。
或者传递 <code class="docutils literal notranslate"><span class="pre">None</span></code> 来将其移除组外。</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="Gtk.ActionGroup">
<em class="property">class </em><code class="descclassname">Gtk.</code><code class="descname">ActionGroup</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#Gtk.ActionGroup" title="永久链接至目标">¶</a></dt>
<dd><p>创建一个新的 <a class="reference internal" href="#Gtk.ActionGroup" title="Gtk.ActionGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.ActionGroup</span></code></a> 实例。action group 的名字用于与action关联健绑定。</p>
<dl class="method">
<dt id="Gtk.ActionGroup.add_action">
<code class="descname">add_action</code><span class="sig-paren">(</span><em>action</em><span class="sig-paren">)</span><a class="headerlink" href="#Gtk.ActionGroup.add_action" title="永久链接至目标">¶</a></dt>
<dd><p>添加一个 <a class="reference internal" href="#Gtk.Action" title="Gtk.Action"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.Action</span></code></a> 对象到组中。</p>
<p>注意本方法不会设置action的加速键，如需要请使用 <a class="reference internal" href="#Gtk.ActionGroup.add_action_with_accel" title="Gtk.ActionGroup.add_action_with_accel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_action_with_accel()</span></code></a> 代替。</p>
</dd></dl>

<dl class="method">
<dt id="Gtk.ActionGroup.add_action_with_accel">
<code class="descname">add_action_with_accel</code><span class="sig-paren">(</span><em>action</em>, <em>accelerator</em><span class="sig-paren">)</span><a class="headerlink" href="#Gtk.ActionGroup.add_action_with_accel" title="永久链接至目标">¶</a></dt>
<dd><p>添加一个 <a class="reference internal" href="#Gtk.Action" title="Gtk.Action"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.Action</span></code></a> 对象到action group中并设置加速键。</p>
<p><em>accelerator</em> 必须是 <a class="reference internal" href="#Gtk.accelerator_parse" title="Gtk.accelerator_parse"><code class="xref py py-func docutils literal notranslate"><span class="pre">Gtk.accelerator_parse()</span></code></a> 可以解析的格式，或者
<code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> 不设置加速键，或者 <code class="docutils literal notranslate"><span class="pre">None</span></code> 使用stock的加速键。</p>
</dd></dl>

<dl class="method">
<dt id="Gtk.ActionGroup.add_actions">
<code class="descname">add_actions</code><span class="sig-paren">(</span><em>entries</em><span class="optional">[</span>, <em>user_data</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#Gtk.ActionGroup.add_actions" title="永久链接至目标">¶</a></dt>
<dd><p>这是一个便捷函数用来创建多个 <a class="reference internal" href="#Gtk.Action" title="Gtk.Action"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.Action</span></code></a> 对象并将他们加入到action group中。</p>
<p><em>entries</em> 是一个包含一到六个以下元素的元组的列表：</p>
<ul class="simple">
<li><p>action的name(必须的)</p></li>
<li><p>action 的 <a class="reference internal" href="stock.html#stock-items"><span class="std std-ref">stock item</span></a> (默认为 <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
<li><p>action 的lable (默认为 <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
<li><p>action 的加速键，格式为 <a class="reference internal" href="#Gtk.accelerator_parse" title="Gtk.accelerator_parse"><code class="xref py py-func docutils literal notranslate"><span class="pre">Gtk.accelerator_parse()</span></code></a> 可以识别的格式(默认为 <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
<li><p>action 的提示信息。 (默认为 <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
<li><p>action激活时调用的回调函数。(默认为 <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
</ul>
<p>aciton 的 “activate” 信号会与回调函数连接。</p>
<p>如果 <em>user_data</em> 不为 <code class="docutils literal notranslate"><span class="pre">None</span></code> ，将会传递给毁掉函数（如果回调函数指定）。</p>
</dd></dl>

<dl class="method">
<dt id="Gtk.ActionGroup.add_toggle_actions">
<code class="descname">add_toggle_actions</code><span class="sig-paren">(</span><em>entries</em><span class="optional">[</span>, <em>user_data</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#Gtk.ActionGroup.add_toggle_actions" title="永久链接至目标">¶</a></dt>
<dd><p>创建多个 <a class="reference internal" href="#Gtk.ToggleAction" title="Gtk.ToggleAction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.ToggleAction</span></code></a> 对象被添加到本组中的便捷函数。</p>
<p><em>entries</em> 是一个包含一到七个以下元素的元组的列表：</p>
<ul class="simple">
<li><p>action的name(必须的)</p></li>
<li><p>action 的 <a class="reference internal" href="stock.html#stock-items"><span class="std std-ref">stock item</span></a> (默认为 <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
<li><p>action 的lable (默认为 <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
<li><p>action 的加速键，格式为 <a class="reference internal" href="#Gtk.accelerator_parse" title="Gtk.accelerator_parse"><code class="xref py py-func docutils literal notranslate"><span class="pre">Gtk.accelerator_parse()</span></code></a> 可以识别的格式(默认为 <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
<li><p>action 的提示信息。 (默认为 <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
<li><p>action激活时调用的回调函数。(默认为 <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
<li><p>一个表示本toggle action是否激活的布尔值。(默认为 <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
</ul>
<p>aciton 的 “activate” 信号会与回调函数连接。</p>
<p>如果 <em>user_data</em> 不为 <code class="docutils literal notranslate"><span class="pre">None</span></code> ，将会传递给毁掉函数（如果回调函数指定）。</p>
</dd></dl>

<dl class="method">
<dt id="Gtk.ActionGroup.add_radio_actions">
<code class="descname">add_radio_actions</code><span class="sig-paren">(</span><em>entries</em><span class="optional">[</span>, <em>value</em><span class="optional">[</span>, <em>on_change</em><span class="optional">[</span>, <em>user_data</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#Gtk.ActionGroup.add_radio_actions" title="永久链接至目标">¶</a></dt>
<dd><p>创建多个 <a class="reference internal" href="#Gtk.RadioAction" title="Gtk.RadioAction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.RadioAction</span></code></a> 并添加到本组中的便捷函数。</p>
<p><em>entries</em> 是一个包含一到六个以下元素的元组的列表：</p>
<ul class="simple">
<li><p>action的name(必须的)</p></li>
<li><p>action 的 <a class="reference internal" href="stock.html#stock-items"><span class="std std-ref">stock item</span></a> (默认为 <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
<li><p>action 的lable (默认为 <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
<li><p>action 的加速键，格式为 <a class="reference internal" href="#Gtk.accelerator_parse" title="Gtk.accelerator_parse"><code class="xref py py-func docutils literal notranslate"><span class="pre">Gtk.accelerator_parse()</span></code></a> 可以识别的格式(默认为 <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
<li><p>action 的提示信息。 (默认为 <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
<li><p>radio action 的值 (默认为 0)</p></li>
</ul>
<p><em>value</em> 指定应该被激活的radio action。</p>
<p>如何 <em>on_change</em> 指定，其会被连接到第一个radio action的 “changed” 信号。</p>
<p>如果 <em>user_data</em> 不为 <code class="docutils literal notranslate"><span class="pre">None</span></code> ，将会传递给毁掉函数（如果回调函数指定）。</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="Gtk.accelerator_parse">
<code class="descclassname">Gtk.</code><code class="descname">accelerator_parse</code><span class="sig-paren">(</span><em>accelerator</em><span class="sig-paren">)</span><a class="headerlink" href="#Gtk.accelerator_parse" title="永久链接至目标">¶</a></dt>
<dd><p>解析代表加速键的字符串。格式类似于 “&lt;Control&gt;a” 或者 “&lt;Shift&gt;&lt;Alt&gt;F1” 或者
“&lt;Release&gt;z” (最后一个为按钮释放)。解析器是相当自由的，允许大小写及 “&lt;Ctl&gt;” and “&lt;Ctrl&gt;”
这样的字符。对于character key，名字不是其符号，而是小写的英文，例如：
应该使用 “&lt;Ctrl&gt;minus” 而不是 “&lt;Ctrl&gt;-” 。</p>
<p>返回 <code class="docutils literal notranslate"><span class="pre">(accelerator_key,</span> <span class="pre">accelerator_mods)</span></code> 元组，其中后者代表
accelerator modifier mask 地一个代表加速键的值。如果解析失败两者均返回0 。</p>
</dd></dl>

</div>
</div>
<div class="section" id="ui-manager">
<h2>UI Manager<a class="headerlink" href="#ui-manager" title="永久链接至标题">¶</a></h2>
<p><a class="reference internal" href="#Gtk.UIManager" title="Gtk.UIManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.UIManager</span></code></a> 提供了一种简单的方式以使用一种
<a class="reference external" href="http://developer.gnome.org/gtk3/stable/GtkUIManager.html#XML-UI">类似与XML的描述</a>
来创建菜单和工具条。</p>
<p>首先，你先要使用 <a class="reference internal" href="#Gtk.UIManager.insert_action_group" title="Gtk.UIManager.insert_action_group"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.UIManager.insert_action_group()</span></code></a> 添加
<a class="reference internal" href="#Gtk.ActionGroup" title="Gtk.ActionGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.ActionGroup</span></code></a> 到 UI Manage。此时最好调用 <a class="reference internal" href="#Gtk.UIManager.get_accel_group" title="Gtk.UIManager.get_accel_group"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.UIManager.get_accel_group()</span></code></a> 和
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.window.add_accel_group()</span></code> 来通知父窗口响应指定的快捷键。</p>
<p>然后你就可以定义菜单和工具条的可见的布局信息并添加了。”ui string” 使用UML格式，
其中你应该指定你已经创建的action的name。记住这些名字只是标识符而已，他们并不是
用户在菜单和工具条中看到的文本。我们创建action时一般会使用能表达其意思的name。</p>
<p>最后，你通过 <a class="reference internal" href="#Gtk.UIManager.get_widget" title="Gtk.UIManager.get_widget"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Gtk.UIManager.get_widget()</span></code></a> 获取root widget并将其添加到
<a class="reference internal" href="layout.html#Gtk.Box" title="Gtk.Box"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gtk.Box</span></code></a> 之类的容器中。</p>
<div class="section" id="uimanager-objects">
<h3>UIManager Objects<a class="headerlink" href="#uimanager-objects" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="Gtk.UIManager">
<em class="property">class </em><code class="descclassname">Gtk.</code><code class="descname">UIManager</code><a class="headerlink" href="#Gtk.UIManager" title="永久链接至目标">¶</a></dt>
<dd><dl class="method">
<dt id="Gtk.UIManager.insert_action_group">
<code class="descname">insert_action_group</code><span class="sig-paren">(</span><em>action_group</em><span class="optional">[</span>, <em>pos</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#Gtk.UIManager.insert_action_group" title="永久链接至目标">¶</a></dt>
<dd><p>将action_group插入与mananger关联的action group组的列表中。之前组中的action会
隐藏后面组中相同name的action。</p>
<p><em>pos</em> 为组插入的位置，如果忽略则会被追加到最后面。</p>
</dd></dl>

<dl class="method">
<dt id="Gtk.UIManager.get_accel_group">
<code class="descname">get_accel_group</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Gtk.UIManager.get_accel_group" title="永久链接至目标">¶</a></dt>
<dd><p>返回与此manage相关联的全局加速键。</p>
</dd></dl>

<dl class="method">
<dt id="Gtk.UIManager.get_widget">
<code class="descname">get_widget</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#Gtk.UIManager.get_widget" title="永久链接至目标">¶</a></dt>
<dd><p>根据path查找控件，path包含UI的XML描述字符串中指定的name。
XML中不包含name或者action属性的元素(例如 &lt;popup&gt;)可以通过XML的以 ‘/’ 分隔的标记名
(如 &lt;popup&gt;)来标识。根标记(“/ui”)可以被忽略。</p>
<p>返回根据 <em>path</em> 找到的控件，如果没找到则返回 <code class="docutils literal notranslate"><span class="pre">None</span></code> 。</p>
</dd></dl>

<dl class="method">
<dt id="Gtk.UIManager.add_ui_from_string">
<code class="descname">add_ui_from_string</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="headerlink" href="#Gtk.UIManager.add_ui_from_string" title="永久链接至目标">¶</a></dt>
<dd><p>解析 <em>text</em> 包含的 <a class="reference external" href="http://developer.gnome.org/gtk3/stable/GtkUIManager.html#XML-UI">UI 定义</a>
并与当前manager的内容合并。如果没有闭合的&lt;ui&gt;元素，则会自动添加一个。</p>
<p>返回合并后的UI的id。</p>
<p>如果发生错误则抛出异常。</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="永久链接至标题">¶</a></h2>
<img alt="../../_images/menu_example.png" src="../../_images/menu_example.png" />
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gi.repository</span> <span class="k">import</span> <span class="n">Gtk</span><span class="p">,</span><span class="n">Gdk</span>

<span class="n">UI_INFO</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">&lt;ui&gt;</span>
<span class="s1">  &lt;menubar name=&#39;MenuBar&#39;&gt;</span>
<span class="s1">    &lt;menu action=&#39;FileMenu&#39;&gt;</span>
<span class="s1">      &lt;menu action=&#39;FileNew&#39;&gt;</span>
<span class="s1">        &lt;menuitem action=&#39;FileNewStandard&#39; /&gt;</span>
<span class="s1">        &lt;menuitem action=&#39;FileNewFoo&#39; /&gt;</span>
<span class="s1">        &lt;menuitem action=&#39;FileNewGoo&#39; /&gt;</span>
<span class="s1">      &lt;/menu&gt;</span>
<span class="s1">      &lt;separator /&gt;</span>
<span class="s1">      &lt;menuitem action=&#39;FileQuit&#39; /&gt;</span>
<span class="s1">    &lt;/menu&gt;</span>

<span class="s1">    &lt;menu action=&#39;EditMenu&#39;&gt;</span>
<span class="s1">      &lt;menuitem action=&#39;EditCut&#39; /&gt;</span>
<span class="s1">      &lt;menuitem action=&#39;EditCopy&#39; /&gt;</span>
<span class="s1">      &lt;menuitem action=&#39;EditPaste&#39; /&gt;</span>
<span class="s1">      &lt;menuitem action=&#39;EditSomething&#39; /&gt;</span>
<span class="s1">    &lt;/menu&gt;</span>

<span class="s1">    &lt;menu action=&#39;ChoicesMenu&#39;&gt;</span>
<span class="s1">      &lt;menuitem action=&#39;ChoiceOne&#39; /&gt;</span>
<span class="s1">      &lt;menuitem action=&#39;ChoiceTwo&#39; /&gt;</span>
<span class="s1">      &lt;separator /&gt;</span>
<span class="s1">      &lt;menuitem action=&#39;ChoiceThree&#39; /&gt;</span>
<span class="s1">    &lt;/menu&gt;</span>
<span class="s1">  &lt;/menubar&gt;</span>

<span class="s1">  &lt;toolbar name=&#39;ToolBar&#39;&gt;</span>
<span class="s1">    &lt;toolitem action=&#39;FileNewStandard&#39; /&gt;</span>
<span class="s1">    &lt;toolitem action=&#39;FileQuit&#39; /&gt;</span>
<span class="s1">  &lt;/toolbar&gt;</span>

<span class="s1">  &lt;popup name=&#39;PopupMenu&#39;&gt;</span>
<span class="s1">    &lt;menuitem action=&#39;EditCut&#39; /&gt;</span>
<span class="s1">    &lt;menuitem action=&#39;EditCopy&#39; /&gt;</span>
<span class="s1">    &lt;menuitem action=&#39;EditPaste&#39; /&gt;</span>
<span class="s1">  &lt;/popup&gt;</span>
<span class="s1">&lt;/ui&gt;</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="k">class</span> <span class="nc">MenuExampleWindow</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Window</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Gtk</span><span class="o">.</span><span class="n">Window</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Menu Demo&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_default_size</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

        <span class="n">action_group</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ActionGroup</span><span class="p">(</span><span class="s1">&#39;my_actions&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_file_menu_actions</span><span class="p">(</span><span class="n">action_group</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_edit_menu_actions</span><span class="p">(</span><span class="n">action_group</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_choices_menu_actions</span><span class="p">(</span><span class="n">action_group</span><span class="p">)</span>

        <span class="n">uimanager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_ui_manager</span><span class="p">()</span>
        <span class="n">uimanager</span><span class="o">.</span><span class="n">insert_action_group</span><span class="p">(</span><span class="n">action_group</span><span class="p">)</span>

        <span class="n">menubar</span> <span class="o">=</span> <span class="n">uimanager</span><span class="o">.</span><span class="n">get_widget</span><span class="p">(</span><span class="s1">&#39;/MenuBar&#39;</span><span class="p">)</span>

        <span class="n">box</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Box</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Orientation</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="n">box</span><span class="o">.</span><span class="n">pack_start</span><span class="p">(</span><span class="n">menubar</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">toolbar</span> <span class="o">=</span> <span class="n">uimanager</span><span class="o">.</span><span class="n">get_widget</span><span class="p">(</span><span class="s1">&#39;/ToolBar&#39;</span><span class="p">)</span>
        <span class="n">box</span><span class="o">.</span><span class="n">pack_start</span><span class="p">(</span><span class="n">toolbar</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">eventbox</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">EventBox</span><span class="p">()</span>
        <span class="n">eventbox</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;button-press-event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_button_press_event</span><span class="p">)</span>
        <span class="n">box</span><span class="o">.</span><span class="n">pack_start</span><span class="p">(</span><span class="n">eventbox</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="n">label</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Right-click to see the popup menu.&#39;</span><span class="p">)</span>
        <span class="n">eventbox</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">popup</span> <span class="o">=</span> <span class="n">uimanager</span><span class="o">.</span><span class="n">get_widget</span><span class="p">(</span><span class="s1">&#39;/PopupMenu&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">box</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_file_menu_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action_group</span><span class="p">):</span>
        <span class="n">action_filemenu</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Action</span><span class="p">(</span><span class="s1">&#39;FileMenu&#39;</span><span class="p">,</span> <span class="s1">&#39;File&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">action_group</span><span class="o">.</span><span class="n">add_action</span><span class="p">(</span><span class="n">action_filemenu</span><span class="p">)</span>

        <span class="n">action_filenewmenu</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Action</span><span class="p">(</span><span class="s1">&#39;FileNew&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">STOCK_NEW</span><span class="p">)</span>
        <span class="n">action_group</span><span class="o">.</span><span class="n">add_action</span><span class="p">(</span><span class="n">action_filenewmenu</span><span class="p">)</span>

        <span class="n">action_new</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Action</span><span class="p">(</span><span class="s1">&#39;FileNewStandard&#39;</span><span class="p">,</span> <span class="s1">&#39;_New&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Create a new file&#39;</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">STOCK_NEW</span><span class="p">)</span>
        <span class="n">action_new</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;activate&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_menu_file_new_generic</span><span class="p">)</span>
        <span class="n">action_group</span><span class="o">.</span><span class="n">add_action_with_accel</span><span class="p">(</span><span class="n">action_new</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">action_group</span><span class="o">.</span><span class="n">add_actions</span><span class="p">([</span>
            <span class="p">(</span><span class="s1">&#39;FileNewFoo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;New Foo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Create new foo&#39;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">on_menu_file_new_generic</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;FileNewGoo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;_New Goo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Create new goo&#39;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">on_menu_file_new_generic</span><span class="p">),</span>
            <span class="p">])</span>

        <span class="n">action_filequit</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">Action</span><span class="p">(</span><span class="s1">&#39;FileQuit&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">STOCK_QUIT</span><span class="p">)</span>
        <span class="n">action_filequit</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;activate&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_menu_file_quit</span><span class="p">)</span>
        <span class="n">action_group</span><span class="o">.</span><span class="n">add_action</span><span class="p">(</span><span class="n">action_filequit</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_edit_menu_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action_group</span><span class="p">):</span>
        <span class="n">action_group</span><span class="o">.</span><span class="n">add_actions</span><span class="p">([</span>
            <span class="p">(</span><span class="s1">&#39;EditMenu&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Edit&#39;</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;EditCut&#39;</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">STOCK_CUT</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_menu_others</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;EditCopy&#39;</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">STOCK_COPY</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_menu_others</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;EditPaste&#39;</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">STOCK_PASTE</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_menu_others</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;EditSomething&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Something&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;control&gt;&lt;alt&gt;S&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_menu_others</span><span class="p">),</span>
            <span class="p">])</span>

    <span class="k">def</span> <span class="nf">add_choices_menu_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action_group</span><span class="p">):</span>
        <span class="n">action_group</span><span class="o">.</span><span class="n">add_action</span><span class="p">(</span><span class="n">Gtk</span><span class="o">.</span><span class="n">Action</span><span class="p">(</span><span class="s1">&#39;ChoicesMenu&#39;</span><span class="p">,</span> <span class="s1">&#39;Choices&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>

        <span class="n">action_group</span><span class="o">.</span><span class="n">add_radio_actions</span><span class="p">([</span>
            <span class="p">(</span><span class="s1">&#39;ChoiceOne&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;One&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;ChoiceTwo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Two&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
            <span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_menu_choices_changed</span><span class="p">)</span>

        <span class="n">three</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">ToggleAction</span><span class="p">(</span><span class="s1">&#39;ChoiceThree&#39;</span><span class="p">,</span> <span class="s1">&#39;Three&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">three</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;toggled&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_menu_choices_toggled</span><span class="p">)</span>
        <span class="n">action_group</span><span class="o">.</span><span class="n">add_action</span><span class="p">(</span><span class="n">three</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_ui_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">uimanager</span> <span class="o">=</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">UIManager</span><span class="p">()</span>

        <span class="c1"># throw exception if Something went wrong</span>
        <span class="n">uimanager</span><span class="o">.</span><span class="n">add_ui_from_string</span><span class="p">(</span><span class="n">UI_INFO</span><span class="p">)</span>

        <span class="c1"># add the accelerator group to the toplevel window</span>
        <span class="n">accelgroup</span> <span class="o">=</span> <span class="n">uimanager</span><span class="o">.</span><span class="n">get_accel_group</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_accel_group</span><span class="p">(</span><span class="n">accelgroup</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">uimanager</span>

    <span class="k">def</span> <span class="nf">on_menu_file_new_generic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
        <span class="nb">print</span> <span class="s1">&#39;A File|New menu iter was selected.&#39;</span>

    <span class="k">def</span> <span class="nf">on_menu_file_quit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
        <span class="n">Gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">on_menu_others</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
        <span class="nb">print</span> <span class="s1">&#39;Menu item&#39;</span> <span class="o">+</span> <span class="n">widget</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;was selected&#39;</span>

    <span class="k">def</span> <span class="nf">on_menu_choices_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">current</span><span class="p">):</span>
        <span class="nb">print</span> <span class="n">current</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;was selected.&#39;</span>

    <span class="k">def</span> <span class="nf">on_menu_choices_toggled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">widget</span><span class="o">.</span><span class="n">get_active</span><span class="p">():</span>
            <span class="nb">print</span> <span class="n">widget</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;activated&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span> <span class="n">widget</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;deactivated&#39;</span>

    <span class="k">def</span> <span class="nf">on_button_press_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="c1"># check if Right mouse button was pressed</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">Gdk</span><span class="o">.</span><span class="n">EventType</span><span class="o">.</span><span class="n">BUTTON_PRESS</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">popup</span><span class="o">.</span><span class="n">popup</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span> <span class="c1"># evnet has been handled</span>

<span class="n">win</span> <span class="o">=</span> <span class="n">MenuExampleWindow</span><span class="p">()</span>
<span class="n">win</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;delete-event&#39;</span><span class="p">,</span> <span class="n">Gtk</span><span class="o">.</span><span class="n">main_quit</span><span class="p">)</span>
<span class="n">win</span><span class="o">.</span><span class="n">show_all</span><span class="p">()</span>
<span class="n">Gtk</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dialogs.html" class="btn btn-neutral float-right" title="对话框（Dialog）" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="textview.html" class="btn btn-neutral float-left" title="Multiline Text Editor" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, qytz(lennyh)
      <span class="lastupdated">
        最后更新于 2019 年 05 月 17 日.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>